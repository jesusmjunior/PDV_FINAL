<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ORION PDV - Clientes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono&display=swap">
    <link rel="stylesheet" href="assets/css/orion-theme.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="icon" href="assets/img/favicon.ico" type="image/x-icon">
</head>
<body>
    <!-- Container Principal -->
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <img src="assets/img/logo-small.png" alt="ORION PDV">
                    <span>ORION PDV</span>
                </div>
                <button id="sidebar-collapse" class="sidebar-toggle d-none d-md-block">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            
            <div class="sidebar-menu">
                <a href="dashboard.html" class="menu-item">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="venda.html" class="menu-item">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Vendas PDV</span>
                </a>
                <a href="produto.html" class="menu-item">
                    <i class="fas fa-box"></i>
                    <span>Produtos</span>
                </a>
                <a href="estoque.html" class="menu-item">
                    <i class="fas fa-warehouse"></i>
                    <span>Estoque</span>
                </a>
                <a href="cliente.html" class="menu-item active">
                    <i class="fas fa-users"></i>
                    <span>Clientes</span>
                </a>
                <a href="relatorio.html" class="menu-item">
                    <i class="fas fa-chart-bar"></i>
                    <span>Relatórios</span>
                </a>
                <a href="config.html" class="menu-item">
                    <i class="fas fa-cog"></i>
                    <span>Configurações</span>
                </a>
            </div>
            
            <div class="sidebar-footer">
                <div class="user-menu" id="user-menu">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <div class="user-name" id="user-name">Carregando...</div>
                        <div class="user-role" id="user-role">Carregando...</div>
                    </div>
                </div>
                <button id="btn-logout" class="sidebar-toggle">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>
        
        <!-- Conteúdo Principal -->
        <div class="main-content">
            <div class="topbar">
                <div class="topbar-title">
                    <h1>Gestão de Clientes</h1>
                </div>
                <div class="topbar-actions">
                    <div id="current-date" class="d-none d-md-block">Carregando data...</div>
                </div>
            </div>
            
            <div class="page-content">
                <div class="filters-container">
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" id="busca-cliente" class="form-control search-input" placeholder="Buscar cliente por nome, documento ou telefone...">
                    </div>
                    
                    <button id="btn-novo-cliente" class="btn btn-primary">
                        <i class="fas fa-user-plus"></i> Novo Cliente
                    </button>
                </div>
                
                <div class="row" style="display: grid; grid-template-columns: 1fr 450px; gap: 1.5rem;">
                    <!-- Lista de Clientes -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-users"></i> Clientes Cadastrados
                            </div>
                            <div>
                                <button id="btn-exportar" class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-file-export"></i> Exportar
                                </button>
                            </div>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table" id="tabela-clientes">
                                    <thead>
                                        <tr>
                                            <th>Nome</th>
                                            <th>Documento</th>
                                            <th>Telefone</th>
                                            <th>Cidade</th>
                                            <th>Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="5" class="text-center text-muted py-3">
                                                <i class="fas fa-spinner fa-spin mr-2"></i> Carregando clientes...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Formulário de Cliente -->
                    <div class="card" id="card-formulario">
                        <div class="card-header">
                            <div class="card-title" id="form-titulo">Novo Cliente</div>
                        </div>
                        <div class="card-body">
                            <form id="form-cliente">
                                <input type="hidden" id="cliente-id">
                                
                                <div class="form-group">
                                    <label for="nome" class="form-label">Nome*</label>
                                    <input type="text" id="nome" class="form-control" placeholder="Nome completo" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="documento" class="form-label">CPF/CNPJ</label>
                                    <input type="text" id="documento" class="form-control" placeholder="CPF ou CNPJ">
                                </div>
                                
                                <div class="form-group">
                                    <label for="telefone" class="form-label">Telefone</label>
                                    <input type="text" id="telefone" class="form-control" placeholder="(XX) XXXXX-XXXX">
                                </div>
                                
                                <div class="form-group">
                                    <label for="email" class="form-label">E-mail</label>
                                    <input type="email" id="email" class="form-control" placeholder="email@exemplo.com">
                                </div>
                                
                                <div class="form-group">
                                    <label for="endereco" class="form-label">Endereço</label>
                                    <input type="text" id="endereco" class="form-control" placeholder="Rua, número, bairro">
                                </div>
                                
                                <div class="form-group">
                                    <label for="cidade" class="form-label">Cidade</label>
                                    <input type="text" id="cidade" class="form-control" placeholder="Cidade/UF">
                                </div>
                                
                                <div class="form-group">
                                    <label for="observacoes" class="form-label">Observações</label>
                                    <textarea id="observacoes" class="form-control" rows="3" placeholder="Observações sobre o cliente"></textarea>
                                </div>
                                
                                <div class="form-group mb-0 d-flex justify-between">
                                    <button type="button" id="btn-cancelar" class="btn btn-outline-primary">
                                        <i class="fas fa-times"></i> Cancelar
                                    </button>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save"></i> Salvar Cliente
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal de Detalhes -->
    <div id="modal-detalhes" class="modal">
        <div class="modal-content" style="width: 700px; max-width: 90%;">
            <div class="modal-header">
                <div class="modal-title">Detalhes do Cliente</div>
                <button class="modal-close btn-close-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="row" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                    <div>
                        <h4 class="mb-3">Informações do Cliente</h4>
                        <div class="mb-2"><strong>Nome:</strong> <span id="detalhe-nome"></span></div>
                        <div class="mb-2"><strong>Documento:</strong> <span id="detalhe-documento"></span></div>
                        <div class="mb-2"><strong>Telefone:</strong> <span id="detalhe-telefone"></span></div>
                        <div class="mb-2"><strong>E-mail:</strong> <span id="detalhe-email"></span></div>
                        <div class="mb-2"><strong>Endereço:</strong> <span id="detalhe-endereco"></span></div>
                        <div class="mb-2"><strong>Cidade:</strong> <span id="detalhe-cidade"></span></div>
                        <div class="mb-2"><strong>Data de Cadastro:</strong> <span id="detalhe-data"></span></div>
                        <div class="mb-2">
                            <strong>Observações:</strong>
                            <p id="detalhe-observacoes" class="mt-1"></p>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="mb-3">Últimas Compras</h4>
                        <div id="ultimas-compras">
                            <div class="text-center text-muted py-3">
                                <i class="fas fa-spinner fa-spin"></i> Carregando compras...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-secondary btn-close-modal">Fechar</button>
                <button id="btn-editar-detalhe" class="btn btn-primary">
                    <i class="fas fa-edit"></i> Editar Cliente
                </button>
            </div>
        </div>
    </div>
    
    <!-- Notificações -->
    <div class="toast-container" id="toast-container"></div>
    
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="assets/js/database.js"></script>
    <script src="assets/js/db-fix.js"></script>
    <script src="assets/js/auth.js"></script>
    <script src="assets/js/core.js"></script>
    <script src="assets/js/cliente.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar autenticação
            if (!auth.verificarAutenticacao()) {
                window.location.href = 'index.html';
                return;
            }
            
            // Dados do usuário
            const user = auth.getUsuarioAtual();
            document.getElementById('user-name').textContent = user.nome;
            document.getElementById('user-role').textContent = user.perfil === 'admin' ? 'Administrador' : user.perfil === 'supervisor' ? 'Supervisor' : 'Vendedor';
            
            // Data atual
            const dataAtual = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('current-date').textContent = dataAtual.toLocaleDateString('pt-BR', options);
            
            // Elementos DOM
            const buscaClienteInput = document.getElementById('busca-cliente');
            const tabelaClientes = document.getElementById('tabela-clientes');
            const formCliente = document.getElementById('form-cliente');
            const cardFormulario = document.getElementById('card-formulario');
            const formTitulo = document.getElementById('form-titulo');
            const clienteIdInput = document.getElementById('cliente-id');
            const nomeInput = document.getElementById('nome');
            const documentoInput = document.getElementById('documento');
            const telefoneInput = document.getElementById('telefone');
            const emailInput = document.getElementById('email');
            const enderecoInput = document.getElementById('endereco');
            const cidadeInput = document.getElementById('cidade');
            const observacoesInput = document.getElementById('observacoes');
            const btnNovoCliente = document.getElementById('btn-novo-cliente');
            const btnCancelar = document.getElementById('btn-cancelar');
            const btnExportar = document.getElementById('btn-exportar');
            
            // Modal
            const modalDetalhes = document.getElementById('modal-detalhes');
            const btnFecharModal = document.querySelectorAll('.btn-close-modal');
            const btnEditarDetalhe = document.getElementById('btn-editar-detalhe');
            
            // Variáveis de controle
            let modoEdicao = false;
            let clienteAtual = null;
            
            // Inicialização
            carregarClientes();
            
            // Event Listeners
            buscaClienteInput.addEventListener('input', carregarClientes);
            formCliente.addEventListener('submit', salvarCliente);
            btnNovoCliente.addEventListener('click', novoCliente);
            btnCancelar.addEventListener('click', cancelarFormulario);
            btnExportar.addEventListener('click', exportarClientes);
            
            btnFecharModal.forEach(btn => {
                btn.addEventListener('click', function() {
                    modalDetalhes.classList.remove('show');
                    setTimeout(() => {
                        modalDetalhes.style.display = 'none';
                    }, 300);
                });
            });
            
            btnEditarDetalhe.addEventListener('click', function() {
                modalDetalhes.classList.remove('show');
                setTimeout(() => {
                    modalDetalhes.style.display = 'none';
                    editarCliente(clienteAtual.id);
                }, 300);
            });
            
            // Formatar CPF/CNPJ ao digitar
            documentoInput.addEventListener('input', function() {
                let valor = this.value.replace(/\D/g, '');
                
                if (valor.length <= 11) {
                    // CPF
                    valor = valor.replace(/(\d{3})(\d)/, '$1.$2');
                    valor = valor.replace(/(\d{3})(\d)/, '$1.$2');
                    valor = valor.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
                } else {
                    // CNPJ
                    valor = valor.replace(/^(\d{2})(\d)/, '$1.$2');
                    valor = valor.replace(/^(\d{2})\.(\d{3})(\d)/, '$1.$2.$3');
                    valor = valor.replace(/\.(\d{3})(\d)/, '.$1/$2');
                    valor = valor.replace(/(\d{4})(\d)/, '$1-$2');
                }
                
                this.value = valor;
            });
            
            // Formatar telefone ao digitar
            telefoneInput.addEventListener('input', function() {
                let valor = this.value.replace(/\D/g, '');
                
                if (valor.length <= 10) {
                    // Telefone fixo
                    valor = valor.replace(/(\d{2})(\d)/, '($1) $2');
                    valor = valor.replace(/(\d{4})(\d)/, '$1-$2');
                } else {
                    // Celular
                    valor = valor.replace(/(\d{2})(\d)/, '($1) $2');
                    valor = valor.replace(/(\d{5})(\d)/, '$1-$2');
                }
                
                this.value = valor;
            });
            
            // Logout
            document.getElementById('btn-logout').addEventListener('click', function() {
                auth.fazerLogout();
                window.location.href = 'index.html';
            });
            
            // ========== FUNÇÕES ==========
            
            function carregarClientes() {
                // Obter clientes
                const clientes = db.getClientes();
                const termoBusca = buscaClienteInput.value.toLowerCase();
                
                // Filtrar clientes
                let clientesFiltrados = [...clientes];
                
                if (termoBusca) {
                    clientesFiltrados = clientesFiltrados.filter(cliente => 
                        cliente.nome.toLowerCase().includes(termoBusca) || 
                        (cliente.documento && cliente.documento.toLowerCase().includes(termoBusca)) ||
                        (cliente.telefone && cliente.telefone.toLowerCase().includes(termoBusca))
                    );
                }
                
                // Ordenar por nome
                clientesFiltrados.sort((a, b) => a.nome.localeCompare(b.nome));
                
                // Gerar HTML da tabela
                const tbody = document.querySelector('#tabela-clientes tbody');
                
                // Não exibir cliente "Consumidor Final" na lista
                clientesFiltrados = clientesFiltrados.filter(cliente => !(cliente.id === "1" && cliente.nome === "Consumidor Final"));
                
                if (clientesFiltrados.length === 0) {
                    tbody.innerHTML = `
                        <tr>
                            <td colspan="5" class="text-center text-muted py-3">
                                <i class="fas fa-users fa-2x mb-3"></i>
                                <p>Nenhum cliente encontrado</p>
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                let html = '';
                
                clientesFiltrados.forEach(cliente => {
                    html += `
                        <tr>
                            <td>${cliente.nome}</td>
                            <td>${cliente.documento || '-'}</td>
                            <td>${cliente.telefone || '-'}</td>
                            <td>${cliente.cidade || '-'}</td>
                            <td>
                                <button class="btn btn-sm btn-outline-info btn-detalhes" data-id="${cliente.id}">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-primary btn-editar" data-id="${cliente.id}">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-danger btn-excluir" data-id="${cliente.id}">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    `;
                });
                
                tbody.innerHTML = html;
                
                // Adicionar eventos aos botões
                document.querySelectorAll('.btn-detalhes').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = this.getAttribute('data-id');
                        abrirDetalhesCliente(id);
                    });
                });
                
                document.querySelectorAll('.btn-editar').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = this.getAttribute('data-id');
                        editarCliente(id);
                    });
                });
                
                document.querySelectorAll('.btn-excluir').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = this.getAttribute('data-id');
                        excluirCliente(id);
                    });
                });
            }
            
            function novoCliente() {
                // Limpar formulário
                formCliente.reset();
                clienteIdInput.value = '';
                
                // Configurar modo
                modoEdicao = false;
                formTitulo.textContent = 'Novo Cliente';
                
                // Foco no primeiro campo
                nomeInput.focus();
            }
            
            function editarCliente(id) {
                const cliente = db.getCliente(id);
                
                if (cliente) {
                    // Preencher formulário
                    clienteIdInput.value = cliente.id;
                    nomeInput.value = cliente.nome;
                    documentoInput.value = cliente.documento || '';
                    telefoneInput.value = cliente.telefone || '';
                    emailInput.value = cliente.email || '';
                    enderecoInput.value = cliente.endereco || '';
                    cidadeInput.value = cliente.cidade || '';
                    observacoesInput.value = cliente.observacoes || '';
                    
                    // Configurar modo
                    modoEdicao = true;
                    formTitulo.textContent = 'Editar Cliente';
                    
                    // Scroll até o formulário em dispositivos móveis
                    if (window.innerWidth < 768) {
                        cardFormulario.scrollIntoView({ behavior: 'smooth' });
                    }
                }
            }
            
            function excluirCliente(id) {
                const cliente = db.getCliente(id);
                
                // Não permitir excluir o cliente "Consumidor Final"
                if (cliente.id === "1" && cliente.nome === "Consumidor Final") {
                    exibirMensagem('Não é possível excluir o cliente padrão', 'warning');
                    return;
                }
                
                // Verificar se o cliente possui vendas
                const vendas = db.getVendas();
                const clienteTemVendas = vendas.some(venda => venda.cliente_id === id);
                
                if (clienteTemVendas) {
                    exibirMensagem('Não é possível excluir cliente com vendas registradas', 'error');
                    return;
                }
                
                if (cliente) {
                    const confirmar = confirm(`Deseja realmente excluir o cliente "${cliente.nome}"?`);
                    
                    if (confirmar) {
                        try {
                            db.deletarCliente(id);
                            carregarClientes();
                            exibirMensagem('Cliente excluído com sucesso', 'success');
                        } catch (erro) {
                            exibirMensagem('Erro ao excluir cliente: ' + erro, 'error');
                        }
                    }
                }
            }
            
            function salvarCliente(e) {
                e.preventDefault();
                
                // Verificar nome
                if (!nomeInput.value.trim()) {
                    exibirMensagem('O nome do cliente é obrigatório', 'error');
                    nomeInput.focus();
                    return;
                }
                
                // Obter dados do formulário
                const cliente = {
                    id: clienteIdInput.value,
                    nome: nomeInput.value.trim(),
                    documento: documentoInput.value.trim() || '',
                    telefone: telefoneInput.value.trim() || '',
                    email: emailInput.value.trim() || '',
                    endereco: enderecoInput.value.trim() || '',
                    cidade: cidadeInput.value.trim() || '',
                    observacoes: observacoesInput.value.trim() || ''
                };
                
                // Adicionar data de cadastro se for novo cliente
                if (!cliente.id) {
                    cliente.data_cadastro = new Date().toISOString();
                }
                
                try {
                    // Salvar cliente
                    db.salvarCliente(cliente);
                    
                    // Atualizar tabela
                    carregarClientes();
                    
                    // Limpar formulário
                    formCliente.reset();
                    clienteIdInput.value = '';
                    
                    // Resetar modo
                    modoEdicao = false;
                    formTitulo.textContent = 'Novo Cliente';
                    
                    // Mensagem de sucesso
                    exibirMensagem('Cliente salvo com sucesso', 'success');
                } catch (erro) {
                    exibirMensagem('Erro ao salvar cliente: ' + erro, 'error');
                }
            }
            
            function cancelarFormulario() {
                // Limpar formulário
                formCliente.reset();
                clienteIdInput.value = '';
                
                // Resetar modo
                modoEdicao = false;
                formTitulo.textContent = 'Novo Cliente';
            }
            
            function abrirDetalhesCliente(id) {
                const cliente = db.getCliente(id);
                
                if (cliente) {
                    clienteAtual = cliente;
                    
                    // Preencher dados do cliente
                    document.getElementById('detalhe-nome').textContent = cliente.nome;
                    document.getElementById('detalhe-documento').textContent = cliente.documento || '-';
                    document.getElementById('detalhe-telefone').textContent = cliente.telefone || '-';
                    document.getElementById('detalhe-email').textContent = cliente.email || '-';
                    document.getElementById('detalhe-endereco').textContent = cliente.endereco || '-';
                    document.getElementById('detalhe-cidade').textContent = cliente.cidade || '-';
                    document.getElementById('detalhe-observacoes').textContent = cliente.observacoes || '-';
                    
                    // Formatar data
                    const data = cliente.data_cadastro ? new Date(cliente.data_cadastro) : null;
                    document.getElementById('detalhe-data').textContent = data ? data.toLocaleDateString('pt-BR') : '-';
                    
                    // Buscar últimas compras
                    const vendas = db.getVendas();
                    const comprasCliente = vendas.filter(venda => venda.cliente_id === cliente.id);
                    
                    // Ordenar por data (mais recentes primeiro)
                    comprasCliente.sort((a, b) => new Date(b.data) - new Date(a.data));
                    
                    // Limitar a 5 últimas compras
                    const ultimasCompras = comprasCliente.slice(0, 5);
                    
                    const divCompras = document.getElementById('ultimas-compras');
                    
                    if (ultimasCompras.length > 0) {
                        // Criar tabela de compras
                        let html = `
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Data</th>
                                        <th>ID</th>
                                        <th>Pagamento</th>
                                        <th>Total</th>
                                    </tr>
                                </thead>
                                <tbody>
                        `;
                        
                        ultimasCompras.forEach(venda => {
                            const data = new Date(venda.data);
                            const dataFormatada = data.toLocaleDateString('pt-BR');
                            
                            html += `
                                <tr>
                                    <td>${dataFormatada}</td>
                                    <td>${venda.id}</td>
                                    <td>${venda.forma_pagamento}</td>
                                    <td>R$ ${venda.total.toFixed(2)}</td>
                                </tr>
                            `;
                        });
                        
                        html += `
                                </tbody>
                            </table>
                        `;
                        
                        divCompras.innerHTML = html;
                    } else {
                        divCompras.innerHTML = '<p class="text-center text-muted">Nenhuma compra encontrada</p>';
                    }
                    
                    // Exibir modal
                    modalDetalhes.style.display = 'flex';
                    setTimeout(() => {
                        modalDetalhes.classList.add('show');
                    }, 10);
                }
            }
            
            function exportarClientes() {
                try {
                    // Obter clientes
                    const clientes = db.getClientes();
                    
                    // Remover cliente "Consumidor Final"
                    const clientesExport = clientes.filter(cliente => !(cliente.id === "1" && cliente.nome === "Consumidor Final"));
                    
                    // Formatar para exportação
                    const clientesFormatados = clientesExport.map(cliente => ({
                        Nome: cliente.nome,
                        Documento: cliente.documento || '',
                        Telefone: cliente.telefone || '',
                        Email: cliente.email || '',
                        Endereco: cliente.endereco || '',
                        Cidade: cliente.cidade || '',
                        DataCadastro: cliente.data_cadastro ? new Date(cliente.data_cadastro).toLocaleDateString('pt-BR') : '',
                        Observacoes: cliente.observacoes || ''
                    }));
                    
                    // Exportar CSV
                    db.exportarCSV(clientesFormatados, 'clientes.csv');
                    
                    exibirMensagem('Clientes exportados com sucesso', 'success');
                } catch (erro) {
                    exibirMensagem('Erro ao exportar clientes: ' + erro, 'error');
                }
            }
            
            // Função para exibir mensagens de notificação
            function exibirMensagem(mensagem, tipo) {
                const toastContainer = document.getElementById('toast-container');
                
                const toast = document.createElement('div');
                toast.className = `toast-notification toast-${tipo}`;
                
                toast.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-${tipo === 'success' ? 'check-circle' : tipo === 'warning' ? 'exclamation-circle' : tipo === 'info' ? 'info-circle' : 'times-circle'}"></i>
                        <span>${mensagem}</span>
                    </div>
                `;
                
                toastContainer.appendChild(toast);
                
                // Exibir com animação
                setTimeout(() => {
                    toast.classList.add('show');
                }, 10);
                
                // Remover após 3 segundos
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        toastContainer.removeChild(toast);
                    }, 300);
                }, 3000);
            }
        });
    </script>
</body>
</html>
